<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CGPA Calculator</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: white;
  }
  .container {
    max-width: 850px;
    margin: 30px auto;
    background: #1e1e1e;
    padding: 20px;
    border-radius: 12px;
  }
  input, select, button {
    padding: 8px;
    margin: 5px;
    border-radius: 6px;
    border: none;
  }
  input, select { background: #2c2c2c; color: white; }
  button { cursor: pointer; font-weight: bold; }
  .green-btn { background: #2ecc71; }
  .red-btn { background: #e74c3c; }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  th, td {
    border: 1px solid #444;
    padding: 8px;
    text-align: center;
  }
  .row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }
  .result {
    text-align: center;
    font-size: 1.2em;
    margin-top: 10px;
  }
</style>
</head>

<body>
<div class="container">
  <h1 style="text-align:center">CGPA Calculator</h1>

  <!-- OLD CGPA -->
  <div class="row">
    <input id="oldCgpa" type="number" placeholder="Old CGPA" step="0.01">
    <input id="oldCredits" type="number" placeholder="Old Credits" step="0.5">
    <button class="green-btn" onclick="addOldCgpa()">Add Old CGPA</button>
    <button class="red-btn" onclick="deleteOldCgpa()">Delete Old CGPA</button>
  </div>

  <hr>

  <!-- COURSE -->
  <div class="row">
    <input id="courseName" placeholder="Course name">
    <input id="credits" type="number" placeholder="Credits" step="0.5">
    <select id="grade">
      <option>A+</option><option>A</option><option>B+</option>
      <option>B</option><option>C+</option><option>C</option>
      <option>D</option><option>F</option>
    </select>
    <button class="green-btn" onclick="addCourse()">Add</button>
  </div>

  <!-- TABLE -->
  <table>
    <thead>
      <tr>
        <th>#</th><th>Course</th><th>Credits</th>
        <th>Grade</th><th>Score</th><th>Action</th>
      </tr>
    </thead>
    <tbody id="courseTable"></tbody>
  </table>

  <div class="result">
    <div id="totalCredits">Total Credits: 0</div>
    <div id="cgpa">CGPA: 0.00</div>
  </div>
</div>

<script>
  let courses = [];

  const gradePoints = {
    "A+":10, "A":9, "B+":8,
    "B":7, "C+":6, "C":5,
    "D":4, "F":0
  };

  function addOldCgpa() {
    const cg = parseFloat(document.getElementById("oldCgpa").value);
    const cr = parseFloat(document.getElementById("oldCredits").value);

    if (isNaN(cg) || cg < 0 || cg > 10) return alert("Invalid CGPA");
    if (isNaN(cr) || cr <= 0) return alert("Invalid Credits");

    courses = courses.filter(c => !c.isOld);

    courses.unshift({
      name: "Previous CGPA",
      credits: cr,
      grade: "OLD",
      score: cg * cr,
      isOld: true
    });

    updateTable();
  }

  function deleteOldCgpa() {
    courses = courses.filter(c => !c.isOld);
    updateTable();
  }

  function addCourse() {
    const name = document.getElementById("courseName").value || "-";
    const credits = parseFloat(document.getElementById("credits").value);
    const grade = document.getElementById("grade").value;

    if (isNaN(credits) || credits <= 0) return alert("Invalid credits");

    courses.push({ name, credits, grade });
    updateTable();
  }

  function deleteCourse(i) {
    courses.splice(i, 1);
    updateTable();
  }

  function updateTable() {
    const table = document.getElementById("courseTable");
    table.innerHTML = "";

    let totalCredits = 0;
    let totalScore = 0;

    courses.forEach((c, i) => {
      const score = c.isOld ? c.score : gradePoints[c.grade] * c.credits;

      totalCredits += c.credits;
      totalScore += score;

      table.innerHTML += `
        <tr>
          <td>${i+1}</td>
          <td>${c.name}</td>
          <td>${c.credits}</td>
          <td>${c.isOld ? "â€”" : c.grade}</td>
          <td>${score.toFixed(2)}</td>
          <td><button class="red-btn" onclick="deleteCourse(${i})">Delete</button></td>
        </tr>
      `;
    });

    document.getElementById("totalCredits").innerText =
      `Total Credits: ${totalCredits}`;
    document.getElementById("cgpa").innerText =
      `CGPA: ${(totalScore / (totalCredits || 1)).toFixed(2)}`;
  }
</script>
</body>
</html>
