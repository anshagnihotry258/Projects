<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wordle Clone</title>

<style>
body {
    background: #121213;
    color: white;
    font-family: Arial;
    text-align: center;
}

h1 { margin-top: 20px; }

#status {
    margin-top: 10px;
    font-size: 18px;
    color: #4caf50;
}

#board {
    margin: 20px auto;
    width: 260px;
}

.row {
    display: flex;
    justify-content: center;
    margin-bottom: 5px;
}

.tile {
    width: 50px;
    height: 50px;
    border: 2px solid #3a3a3c;
    margin: 2px;
    font-size: 28px;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
}

.green { background: #538d4e; }
.yellow { background: #b59f3b; }
.gray { background: #3a3a3c; }

#keyboard {
    width: 500px;
    margin: 20px auto;
}

.key {
    padding: 10px;
    margin: 4px;
    background: #818384;
    border-radius: 5px;
    display: inline-block;
    cursor: pointer;
}

#nextBtn {
    margin-top: 15px;
    padding: 10px 20px;
    font-size: 16px;
    background: #538d4e;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}
</style>
</head>

<body>

<h1>WORDLE</h1>
<p id="status"></p>

<div id="board"></div>
<div id="keyboard"></div>

<button id="nextBtn">Next Word üîÅ</button>

<script>
let WORD_LIST = [];
let WORD = "";
let row = 0, col = 0;
let gameOver = false;

const board = document.getElementById("board");
const keyboard = document.getElementById("keyboard");
const status = document.getElementById("status");

/* ---------- LOAD DICTIONARY ---------- */
fetch("words.json")
  .then(res => res.json())
  .then(data => {
      WORD_LIST = Object.keys(data)
        .map(w => w.toUpperCase())
        .filter(w => w.length === 5 && /^[A-Z]+$/.test(w));

      startGame();
  });

/* ---------- GAME SETUP ---------- */
function startGame() {
    WORD = WORD_LIST[Math.floor(Math.random() * WORD_LIST.length)];
    row = col = 0;
    gameOver = false;
    status.innerText = "";
    createBoard();
    createKeyboard();
}

function createBoard() {
    board.innerHTML = "";
    for (let i = 0; i < 6; i++) {
        const r = document.createElement("div");
        r.className = "row";
        for (let j = 0; j < 5; j++) {
            const t = document.createElement("div");
            t.className = "tile";
            r.appendChild(t);
        }
        board.appendChild(r);
    }
}

function createKeyboard() {
    keyboard.innerHTML = "";
    const keys = "QWERTYUIOPASDFGHJKLZXCVBNM";

    keys.split("").forEach(k => {
        const key = document.createElement("div");
        key.className = "key";
        key.innerText = k;
        key.onclick = () => pressKey(k);
        keyboard.appendChild(key);
    });

    const enter = document.createElement("div");
    enter.className = "key";
    enter.innerText = "ENTER";
    enter.onclick = checkWord;
    keyboard.appendChild(enter);

    const del = document.createElement("div");
    del.className = "key";
    del.innerText = "DEL";
    del.onclick = deleteLetter;
    keyboard.appendChild(del);
}

/* ---------- INPUT ---------- */
function pressKey(letter) {
    if (gameOver || col >= 5) return;
    status.innerText = "";
    board.children[row].children[col].innerText = letter;
    col++;
}

function deleteLetter() {
    if (col > 0) {
        col--;
        board.children[row].children[col].innerText = "";
    }
}

/* ---------- GAME LOGIC ---------- */
function checkWord() {
    if (col < 5 || gameOver) return;

    let guess = "";
    for (let i = 0; i < 5; i++)
        guess += board.children[row].children[i].innerText;

    if (!WORD_LIST.includes(guess)) {
        status.innerText = "‚ùå Not a valid word!";
        return;
    }

    let wordArr = WORD.split("");
    let result = Array(5).fill("gray");

    // Pass 1: Green
    for (let i = 0; i < 5; i++) {
        if (guess[i] === wordArr[i]) {
            result[i] = "green";
            wordArr[i] = null;
        }
    }

    // Pass 2: Yellow
    for (let i = 0; i < 5; i++) {
        if (result[i] === "green") continue;
        let idx = wordArr.indexOf(guess[i]);
        if (idx !== -1) {
            result[i] = "yellow";
            wordArr[idx] = null;
        }
    }

    for (let i = 0; i < 5; i++)
        board.children[row].children[i].className = "tile " + result[i];

    if (guess === WORD) {
        status.innerText = "üéâ Correct! Click Next Word";
        gameOver = true;
        return;
    }

    row++;
    col = 0;

    if (row === 6) {
        status.innerText = "‚ùå Word was: " + WORD;
        gameOver = true;
    }
}

/* ---------- CONTROLS ---------- */
document.addEventListener("keydown", e => {
    if (e.key === "Backspace") deleteLetter();
    else if (e.key === "Enter") checkWord();
    else if (/^[a-zA-Z]$/.test(e.key)) pressKey(e.key.toUpperCase());
});

document.getElementById("nextBtn").onclick = startGame;
</script>

</body>
</html>
